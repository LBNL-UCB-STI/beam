package beam.agentsim.agents.ridehail

import java.util.UUID

import beam.agentsim.agents.vehicles.VehiclePersonId
import beam.router.BeamRouter.Location
import org.apache.commons.lang.builder.HashCodeBuilder
import org.matsim.api.core.v01.population.Person
import org.matsim.api.core.v01.{Coord, Id}
import org.matsim.vehicles.Vehicle

case class RideHailRequest(
  requestType: RideHailRequestType,
  customer: VehiclePersonId,
<<<<<<< HEAD
  pickUpLocation: Location,
  departAt: Int,
  destination: Location,
=======
  pickUpLocationUTM: Location,
  departAt: Int,
  destinationUTM: Location,
>>>>>>> master
  asPooled: Boolean = false,
  groupedWithOtherRequests: List[RideHailRequest] = List(),
  requestId: Int = UUID.randomUUID().hashCode()
) {

  def addSubRequest(subRequest: RideHailRequest): RideHailRequest =
    this.copy(requestId = this.requestId, groupedWithOtherRequests = this.groupedWithOtherRequests :+ subRequest)
  override def equals(that: Any) = this.requestId == that.asInstanceOf[RideHailRequest].requestId
  override def hashCode: Int = requestId
  override def toString: String =
<<<<<<< HEAD
    s"RideHailRequest(id: $requestId, type: $requestType, customer: ${customer.personId}, pickup: $pickUpLocation, time: $departAt, dest: $destination)"
=======
    s"RideHailRequest(id: $requestId, type: $requestType, customer: ${customer.personId}, pickup: $pickUpLocationUTM, time: $departAt, dest: $destinationUTM)"
>>>>>>> master
}

object RideHailRequest {

  val DUMMY = RideHailRequest(
    RideHailInquiry,
    VehiclePersonId(Id.create("dummy", classOf[Vehicle]), Id.create("dummy", classOf[Person])),
    new Coord(Double.NaN, Double.NaN),
    Int.MaxValue,
    new Coord(Double.NaN, Double.NaN)
  )
}
